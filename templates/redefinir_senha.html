<!doctype html>
<html lang="pt-br">
    <head>
        <meta charset="UTF-8" />
        <title>Recuperar Senha - Vale & Feira</title>
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <link
            href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700&display=swap"
            rel="stylesheet"
        />

        <link
            rel="stylesheet"
            href="{{ url_for('static', filename='css/redefinir_senha.css') }}"
        />
    </head>
    <body>
        <header class="topo-recuperacao">
            <a href="{{ url_for('main.home') }}" class="area-logo-recuperacao">
                <img
                    src="{{ url_for('static', filename='img/logo.png') }}"
                    alt="Vale&Feira"
                    class="logo-imagem-recuperacao"
                />
                <span class="logo-texto-recuperacao">Vale&Feira</span>
            </a>
            <a
                href="{{ url_for('auth.cancelar_recuperacao') }}"
                class="link-cancelar-recuperacao"
                >Cancelar</a
            >
        </header>

        <main class="container-recuperacao">
            <div class="caixa-form-recuperacao">
                <div class="passos-recuperacao">
                    <span
                        class="passo-recuperacao {{ 'passo-ativo-recuperacao' if etapa == 1 }}"
                        >1. E-mail</span
                    >
                    <span class="seta-passos-recuperacao">&rarr;</span>
                    <span
                        class="passo-recuperacao {{ 'passo-ativo-recuperacao' if etapa == 2 }}"
                        >2. Código</span
                    >
                    <span class="seta-passos-recuperacao">&rarr;</span>
                    <span
                        class="passo-recuperacao {{ 'passo-ativo-recuperacao' if etapa == 3 }}"
                        >3. Senha</span
                    >
                </div>

                {% with messages = get_flashed_messages(with_categories=true) %}
                {% if messages %} {% for category, message in messages %}
                <div class="mensagem-flash-recuperacao flash-{{ category }}">
                    {{ message }}
                </div>
                {% endfor %} {% endif %} {% endwith %} {% if etapa == 1 %}
                <h2 class="titulo-recuperacao">Recuperar Acesso</h2>
                <form method="POST" class="formulario-recuperacao">
                    {{ form_email.hidden_tag() }}
                    <div class="grupo-campo-recuperacao">
                        <label class="rotulo-campo-recuperacao"
                            >Informe seu E-mail</label
                        >
                        {{ form_email.emailForm(class="campo-recuperacao",
                        placeholder="seu@email.com") }}
                    </div>
                    {{ form_email.submit(class="botao-recuperacao") }}
                </form>

                {% elif etapa == 2 %}
                <h2 class="titulo-recuperacao">Código de Segurança</h2>
                <p class="texto-ajuda-recuperacao">
                    Verifique seu e-mail e digite o código abaixo.
                </p>
                <form method="POST" class="formulario-recuperacao">
                    {{ form_codigo.hidden_tag() }}
                    <div class="grupo-campo-recuperacao">
                        <label class="rotulo-campo-recuperacao"
                            >Código Recebido</label
                        >
                        {{ form_codigo.codigoForm(class="campo-recuperacao",
                        placeholder="Ex: 123456") }}
                    </div>
                    {{ form_codigo.submit(class="botao-recuperacao") }}
                </form>

                {% elif etapa == 3 %}
                <h2 class="titulo-recuperacao">Criar Nova Senha</h2>
                <form method="POST" class="formulario-recuperacao">
                    {{ form_senha.hidden_tag() }}
                    <div class="grupo-campo-recuperacao">
                        <label class="rotulo-campo-recuperacao"
                            >Nova Senha</label
                        >
                        {{ form_senha.novaSenhaForm(class="campo-recuperacao",
                        placeholder="Mínimo 6 caracteres") }}
                    </div>
                    <div class="grupo-campo-recuperacao">
                        <label class="rotulo-campo-recuperacao"
                            >Confirmar Nova Senha</label
                        >
                        {{
                        form_senha.confirmaSenhaForm(class="campo-recuperacao",
                        placeholder="Repita a senha") }}
                    </div>
                    {{ form_senha.submit(class="botao-recuperacao") }}
                </form>
                {% endif %}
            </div>
        </main>

        <footer class="rodape-recuperacao">&copy; 2026 Vale&Feira.</footer>
    </body>
</html>
